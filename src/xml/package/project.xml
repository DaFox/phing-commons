<?xml version="1.0" encoding="UTF-8"?>

<!-- ============================================================  -->
<!-- package.project                                               --> 
<!--                                                               --> 
<!-- @author Jan Thoennessen <jan.thoennessen@googlemail.com>      --> 
<!-- ============================================================  -->
<project name="package.project">


    <!-- ============================================  -->
    <!-- package.project:init                          --> 
    <!-- ============================================  -->  
    <target name="package.project:init">
        <echo message="package.project:init default" />
        
        <patternset id="patternset.package.project">
            <include name="**/**"                   />
            <exclude name=".git/**"                 />
            <exclude name="build/**"                />
            <exclude name="build.xml"               />
            <exclude name="build.properties"        />
            <exclude name="build.properties.apigen" />
            <exclude name="phplint.cache"           />
            <exclude name="jslint.cache"            />
        </patternset>        
    </target>
    
    
    <!-- ============================================  -->
    <!-- package.project:before                        -->
    <!-- ============================================  -->
    <target name="package.project:before">
        <echo message="package.project:before default" />
    </target>
        
        
    <!-- ============================================  -->
    <!-- package.project:main                          --> 
    <!-- ============================================  -->  
    <target name="package.project:main">
        <delete dir="${project.build}/package" />
        <mkdir  dir="${project.build}/package" />
        
        <copy todir="${project.build}/package">
            <fileset dir=".">
                <patternset refid="patternset.package.project" />
            </fileset>
        </copy>

        <delete file="${project.build}/${project.build.package.name}" />
        
        <tar destfile="${project.build}/${project.build.package.name}" compression="gzip">
            <fileset dir="${project.build}/package">
                <include name="**/**" />
            </fileset>
        </tar>
    </target>
    
    
    <!-- ============================================  -->
    <!-- package.project:after                         -->
    <!-- ============================================  -->
    <target name="package.project:after">
        <echo message="package.project:after default" />
    </target>
    
    
    <!-- ============================================  -->
    <!-- package.project                               -->
    <!-- ============================================  -->
    <target name="package.project" depends="package.project:init,package.project:before,package.project:main,package.project:after" />
 
 
</project>