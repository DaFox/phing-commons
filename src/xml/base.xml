<?xml version="1.0" encoding="UTF-8"?>


<project name="base">


    <!-- ============================================ -->
    <!-- properties                                   -->
    <!-- ============================================ -->
    <php function="dirname" returnProperty="phing:commons:basedir">
        <param value="${phing.file.base}" />
    </php>


    <php function="dirname" returnProperty="project.root">
        <param value="${phing.file}" />
    </php>


    <!-- ============================================ -->
    <!-- phing commons                                -->
    <!-- ============================================ -->
    <property name="phing:commons:basedir" value="${phing:commons:basedir}/.." override="true" />
    <property name="phing:commons:root" value="${phing:commons:basedir}/.." override="true" />
    <property name="phing:commons:xml" value="${phing:commons:basedir}/xml" override="true" />
    <property name="phing:commons:xsl" value="${phing:commons:basedir}/xsl" override="true" />


    <resolvepath propertyName="phing:commons:basedir" file="${phing:commons:basedir}" />
    <resolvepath propertyName="phing:commons:root" file="${phing:commons:root}" />
    <resolvepath propertyName="phing:commons:xml" file="${phing:commons:xml}" />
    <resolvepath propertyName="phing:commons:xsl" file="${phing:commons:xsl}" />
    <resolvepath propertyName="project.root" file="${project.root}" />


    <!-- ============================================ -->
    <!-- project properties                           -->
    <!-- ============================================ -->
    <property file="./build.properties" />


    <fail unless="project.name" message="missing project.name" />
    <fail unless="project.vendor" message="missing project.vendor" />


    <loadfile property="project.version" file="${project.root}/VERSION" />


    <php function="trim" returnProperty="project.version">
        <param value="${project.version}" />
    </php>


    <property name="project.public" value="public" />
    <property name="manifest.project" value="manifest/project.json" />
    <property name="manifest.css" value="manifest/css.json" />
    <property name="manifest.js" value="manifest/js.json" />
    <property name="build.project" value="build/project" />
    <property name="build.reports" value="build/reports" />
    <property name="build.tmp" value="build/tmp" />
    <property name="java" value="java" />


    <resolvepath propertyName="project.public" file="${project.public}" />
    <resolvepath propertyName="manifest.project" file="${manifest.project}" />
    <resolvepath propertyName="manifest.css" file="${manifest.css}" />
    <resolvepath propertyName="manifest.js" file="${manifest.js}" />
    <resolvepath propertyName="build.project" file="${build.project}" />
    <resolvepath propertyName="build.reports" file="${build.reports}" />
    <resolvepath propertyName="build.tmp" file="${build.tmp}" />


    <!-- ============================================ -->
    <!-- tasks definitions                            -->
    <!-- ============================================ -->
    <includepath classpath="${phing:commons:basedir}/tasks" />
    <taskdef classname="PhingCommonsBundleProjectTask" name="phing-commons-bundle-project" />
    <taskdef classname="PhingCommonsBundleCSSTask" name="phing-commons-bundle-css" />
    <taskdef classname="PhingCommonsBundleJSTask" name="phing-commons-bundle-js" />


    <!-- ============================================ -->
    <!-- import commons                               -->
    <!-- ============================================ -->
    <import file="${phing:commons:xml}/bundle.xml" />
    <import file="${phing:commons:xml}/clean.xml" />
    <import file="${phing:commons:xml}/project.xml" />
    <import file="${phing:commons:xml}/report.xml" />
    <import file="${phing:commons:xml}/test.xml" />


    <!-- ============================================ -->
    <!-- help.properties                              -->
    <!-- ============================================ -->
    <target name="help.properties">
        <echo message="property                                value" />
        <echo message="================================================================================" />
        <echo message="project.name                            ${project.name}" level="warning" />
        <echo message="project.vendor                          ${project.vendor}" level="warning" />
        <echo message="project.version                         ${project.version}" level="warning" />
        <echo message="project.root                            ${project.root}" level="error" />
        <echo message="project.public                          ${project.public}" />
        <echo message="================================================================================" />
        <echo message="build.project                           ${build.project}" />
        <echo message="build.reports                           ${build.reports}" />
        <echo message="build.tmp                               ${build.tmp}" />
        <echo message="================================================================================" />
        <echo message="manifest.project                        ${manifest.project}" />
        <echo message="manifest.css                            ${manifest.css}" />
        <echo message="manifest.js                             ${manifest.js}" />
        <echo message="================================================================================" />
        <echo message="java                                    ${java}" />
        <echo message="" />
        <echo message="target                                  description" />
        <echo message="================================================================================" />
        <echo message="help.report                             Overview of Reporting Targets" />
        <echo message="help.test                               Overview of Testing Targets" />
        <echo message="help.bundle                             Overview of Project Bundling Targets" />
        <echo message="help.project                            Overview of Project Targets" />
        <echo message="help.clean                              Overview of Cleaning Targets" />
    </target>


    <!-- ============================================ -->
    <!-- help                                         -->
    <!-- ============================================ -->
    <target name="help" depends="help.properties" />


    <!-- ============================================ -->
    <!-- test                                         -->
    <!-- ============================================ -->
    <target name="test">
        <echo message="no actions defined" />
    </target>


    <!-- ============================================ -->
    <!-- report                                       -->
    <!-- ============================================ -->
    <target name="report">
        <echo message="no actions defined" />
    </target>


    <!-- ============================================ -->
    <!-- build                                        -->
    <!-- ============================================ -->
    <target name="build">
        <echo message="no actions defined" />
    </target>


    <!-- ============================================ -->
    <!-- deploy                                       -->
    <!-- ============================================ -->
    <target name="deploy">
        <echo message="no actions defined" />
    </target>


</project>