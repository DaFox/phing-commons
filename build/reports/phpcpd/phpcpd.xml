<?xml version="1.0" encoding="UTF-8"?>
<pmd-cpd version="phpcpd 1.3.5">
  <duplication lines="18" tokens="51">
    <file path="/var/www/phing-commons/./src/tasks/PhingCommonsAppendTask.php" line="104"/>
    <file path="/var/www/phing-commons/./src/tasks/PhingCommonsAppendTask.php" line="154"/>
    <codefragment>                $fullPath = realpath($fl-&gt;getDir($this-&gt;project));

                if(file_exists($this-&gt;destFile)) {
                    $this-&gt;log('deleting old append file ' . $this-&gt;destFile);

                    if(!@unlink($this-&gt;destFile)) {
                        throw new BuildException('could not delete old append file');
                    }
                }

                foreach($files as $file) {
                    $this-&gt;log('Appending file ' . $file);

                    try {
                        $target = $this-&gt;destFile;

                        if(file_exists(dirname($target)) === false) {
                            mkdir(dirname($target), 0700, true);
</codefragment>
  </duplication>
  <duplication lines="8" tokens="33">
    <file path="/var/www/phing-commons/./src/tasks/PhingCommonsMinCSSTask.php" line="214"/>
    <file path="/var/www/phing-commons/./src/tasks/PhingCommonsMinCSSTask.php" line="250"/>
    <codefragment>                $fullPath = realpath($fl-&gt;getDir($this-&gt;project));

                foreach($files as $file) {
                    $this-&gt;log('Minifying file ' . $file);

                    try {
                        $target = $this-&gt;targetDir . '/' . str_replace($fullPath, '', str_replace('.css', $this-&gt;suffix . '.css', $file));
                        if(file_exists(dirname($target)) === false) {
</codefragment>
  </duplication>
  <duplication lines="10" tokens="44">
    <file path="/var/www/phing-commons/./src/tasks/PhingCommonsMinJSTask.php" line="142"/>
    <file path="/var/www/phing-commons/./src/tasks/PhingCommonsMinJSTask.php" line="182"/>
    <codefragment>                $fullPath = realpath($fl-&gt;getDir($this-&gt;project));

                foreach($files as $file) {
                    $this-&gt;log('Minifying file ' . $file);
                    try {
                        $target = $this-&gt;targetDir . '/' . str_replace($fullPath, '', str_replace('.js', $this-&gt;suffix . '.js', $file));
                        if(file_exists(dirname($target)) === false) {
                            mkdir(dirname($target), 0700, true);
                        }

</codefragment>
  </duplication>
  <duplication lines="12" tokens="19">
    <file path="/var/www/phing-commons/./src/tasks/vendor/cssmin-v3.0.1.php" line="428"/>
    <file path="/var/www/phing-commons/./src/tasks/vendor/cssmin-v3.0.1.php" line="1804"/>
    <codefragment>class CssWhitesmithsFormatter extends aCssFormatter&#13;
	{&#13;
	/**&#13;
	 * Implements {@link aCssFormatter::__toString()}.&#13;
	 * &#13;
	 * @return string&#13;
	 */&#13;
	public function __toString()&#13;
		{&#13;
		$r				= array();&#13;
		$level			= 0;&#13;
		for ($i = 0, $l = count($this-&gt;tokens); $i &lt; $l; $i++)&#13;
</codefragment>
  </duplication>
</pmd-cpd>
